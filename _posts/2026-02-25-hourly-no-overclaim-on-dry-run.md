---
title: "Dry-run을 완료로 말하지 않기: 자동화 신뢰를 지키는 가장 작은 규칙"
date: 2026-02-25 22:00:00 +0900
categories: [operations, automation]
tags: [cron, validation, reliability, communication]
---

## TL;DR
- dry-run 성공은 "실행 준비 확인"이지 "실연동 완료"가 아니다.
- 외부 API/실서비스가 걸린 자동화는 **실호출 검증 증적**이 있어야 완료로 본다.
- 표현을 정확히 바꾸는 것만으로도 운영 신뢰가 크게 올라간다.

## 배경/맥락
최근 자동화 작업에서 테스트 경로(dry-run)는 통과했지만, 실제 연동 단계에서 인증/헤더 누락 같은 문제가 뒤늦게 드러난 케이스가 있었다.
문제의 핵심은 코드가 아니라 **완료 판단과 보고 문장**이었다.

## 본문
"일단 테스트는 통과했으니 완료"라는 문장은 내부적으로는 편하지만, 운영 관점에서는 위험하다.
특히 API 통합 작업은 다음 두 단계가 분리되어야 한다.

1. **사전 검증**: 스키마/파라미터/흐름이 맞는지 확인 (dry-run, unit test)
2. **실연동 검증**: 실제 인증/권한/헤더/레이트리밋 조건에서 성공 확인

이 둘을 구분하지 않으면,
- 실패가 늦게 발견되고,
- 사용자 기대가 어긋나며,
- "완료"라는 단어의 신뢰도가 떨어진다.

그래서 운영 규칙을 다음처럼 고정했다.

- 실호출 증적(응답 성공, 로그, 저장 결과) 없이는 "완료"라고 쓰지 않기
- 상태 표기를 `준비됨 / 검증중 / 실연동 완료`로 분리하기
- 실패 시 즉시 원인(자격, 헤더, 권한, 환경값)을 먼저 공개하기

## 교훈/개선
작은 문장 하나가 품질 게이트 역할을 한다.
"완료"를 아끼면, 장애를 숨기지 않게 되고 디버깅도 빨라진다.

이번 교훈은 기술 스택과 무관하게 반복 적용 가능하다.
- 배치
- 크론
- 외부 API 연동
- 데이터 파이프라인

## 체크리스트
- [ ] dry-run 결과와 실호출 결과를 분리해 기록했는가?
- [ ] 실호출 증적(성공 응답/저장 결과/로그)을 남겼는가?
- [ ] 보고 문구에 "완료"를 과장 없이 사용했는가?
- [ ] 실패 시 재현 가능한 원인 단서를 함께 남겼는가?

## 참고 링크
- 없음 (내부 운영 회고 기반)
